{"version":3,"sources":["../src/confirm_delete.js"],"names":["define","$","Ajax","str","ModalFactory","ModalEvents","Notification","on","btnId","attr","ary","split","fishId","length","create","type","types","SAVE_CANCEL","title","body","then","modal","setSaveButtonText","root","getRoot","save","call","methodname","args","fishid","done","window","location","href","fail","exception","show"],"mappings":"AAwBAA,OAAM,iCAAC,CACL,QADK,CAEL,WAFK,CAGL,UAHK,CAIL,oBAJK,CAKL,mBALK,CAML,mBANK,CAAD,CAOH,SAAUC,CAAV,CAAaC,CAAb,CAAmBC,CAAnB,CAAwBC,CAAxB,CAAsCC,CAAtC,CAAmDC,CAAnD,CAAiE,CAClEL,CAAC,CAAC,aAAD,CAAD,CAAiBM,EAAjB,CAAoB,OAApB,CAA6B,UAAY,IACnCC,CAAAA,CAAK,CAAGP,CAAC,CAAC,IAAD,CAAD,CAAQQ,IAAR,CAAa,IAAb,CAD2B,CAEnCC,CAAG,CAAGF,CAAK,CAACG,KAAN,CAAY,GAAZ,CAF6B,CAGnCC,CAAM,CAAGF,CAAG,CAACA,CAAG,CAACG,MAAJ,CAAa,CAAd,CAHuB,CAMvCT,CAAY,CAACU,MAAb,CAAoB,CAClBC,IAAI,CAAEX,CAAY,CAACY,KAAb,CAAmBC,WADP,CAElBC,KAAK,CAAE,gBAFW,CAGlBC,IAAI,CAAE,6CAHY,CAApB,EAIGC,IAJH,CAIQ,SAAUC,CAAV,CAAiB,CACvBA,CAAK,CAACC,iBAAN,CAAwB,QAAxB,EAEA,GAAIC,CAAAA,CAAI,CAAGF,CAAK,CAACG,OAAN,EAAX,CACAD,CAAI,CAAChB,EAAL,CAAQF,CAAW,CAACoB,IAApB,CAA0B,UAAY,CAUpCvB,CAAI,CAACwB,IAAL,CAAU,CALI,CACZC,UAAU,6BADE,CAEZC,IAAI,CALO,CACXC,MAAM,CAAEjB,CADG,CAGC,CAKJ,CAAV,EAAqB,CAArB,EACGkB,IADH,CACQ,UAAY,CAChBC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuBhC,CAAC,CAAC+B,QAAD,CAAD,CAAYvB,IAAZ,CAAiB,MAAjB,CACxB,CAHH,EAIGyB,IAJH,CAIQ5B,CAAY,CAAC6B,SAJrB,CAKD,CAfD,EAgBAd,CAAK,CAACe,IAAN,EACD,CAzBD,CA0BD,CAhCD,CAiCD,CAzCK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Version details\n *\n * @package    local_aquarium\n * @author     shahriar\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @var stdClass $plugin\n */\n\ndefine([\n  \"jquery\",\n  \"core/ajax\",\n  \"core/str\",\n  \"core/modal_factory\",\n  \"core/modal_events\",\n  \"core/notification\",\n], function ($, Ajax, str, ModalFactory, ModalEvents, Notification) {\n  $(\".delete-btn\").on(\"click\", function () {\n    let btnId = $(this).attr(\"id\");\n    let ary = btnId.split(\"-\");\n    let fishId = ary[ary.length - 1];\n\n    //creating modal\n    ModalFactory.create({\n      type: ModalFactory.types.SAVE_CANCEL,\n      title: \"Confirm Delete\",\n      body: \"This fish will be removed from the database\",\n    }).then(function (modal) {\n      modal.setSaveButtonText(\"delete\");\n\n      let root = modal.getRoot();\n      root.on(ModalEvents.save, function () {\n        let wsfunction = \"local_aquarium_delete_fish\";\n        let params = {\n          fishid: fishId,\n        };\n        let request = {\n          methodname: wsfunction,\n          args: params,\n        };\n\n        Ajax.call([request])[0]\n          .done(function () {\n            window.location.href = $(location).attr(\"href\");\n          })\n          .fail(Notification.exception);\n      });\n      modal.show();\n    });\n  });\n});\n"],"file":"confirm_delete.min.js"}